<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GASTS | Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ù„ÙƒÙŠ Ø§Ù„Ø£ØµÙ„ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„ÙØ¶Ø§Ø¦ÙŠØ© Ø§Ù„Ø£ØµÙ„ÙŠØ© */
        html, body {
            margin: 0; padding: 0;
            background-color: #05080a !important;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #eee, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 40px 70px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 50px 160px, #ddd, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 90px 40px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 130px 80px, #fff, rgba(0,0,0,0));
            background-repeat: repeat;
            background-size: 200px 200px;
            color: #ffffff;
            font-family: 'Cairo', sans-serif;
            text-align: center;
        }

        /* ÙˆØ«ÙŠÙ‚Ø© Ø§Ù„Ø¹Ù…Ù„ */
        .license-header {
            margin-top: 30px;
            display: inline-flex;
            align-items: center;
            background: rgba(255,255,255,0.07);
            padding: 10px 30px;
            border-radius: 100px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            gap: 10px;
        }

        /* Ø§Ù„Ù„ÙˆØ¬Ùˆ Ø§Ù„Ø¶Ø®Ù… Ø¬Ø¯Ø§Ù‹ */
        .big-logo {
            font-size: clamp(80px, 25vw, 160px) !important;
            font-weight: 900;
            margin: 20px 0 0 0;
            line-height: 0.8;
            background: linear-gradient(to bottom, #ffffff, #d4af37);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -5px;
        }

        .sub-text {
            color: #d4af37;
            letter-spacing: 5px;
            font-weight: bold;
            margin-bottom: 20px;
            display: block;
        }

        /* Ø²Ø± ØªÙŠÙƒ ØªÙˆÙƒ Ø§Ù„Ø£Ø¨ÙŠØ¶ Ø§Ù„ÙˆØ§Ø¶Ø­ Ø¬Ø¯Ø§Ù‹ */
        .tiktok-btn-white {
            background-color: #ffffff !important;
            color: #000000 !important;
            padding: 15px 40px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 900;
            display: inline-block;
            margin: 20px 0;
            font-size: 18px;
            box-shadow: 0 10px 30px rgba(255,255,255,0.2);
        }

        /* Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù…Ø¶ÙŠØ¡ Ø§Ù„ÙƒØ¨ÙŠØ± */
        .main-glow-box {
            border: 2px solid #d4af37;
            background: rgba(255,255,255,0.02);
            margin: 40px auto;
            padding: 50px 20px;
            width: 90%;
            max-width: 800px;
            border-radius: 40px;
            box-shadow: 0 0 40px rgba(212, 175, 55, 0.2);
        }

        .main-glow-box h2 {
            font-size: 35px;
            color: #d4af37;
            margin: 0;
        }

        .main-glow-box p {
            font-size: 20px;
            opacity: 0.9;
            line-height: 1.8;
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„ÙˆØ§Ø³Ø¹Ø© */
        .ads-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 40px;
            padding: 50px;
            width: 100%;
            box-sizing: border-box;
        }

        .card {
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(212,175,55,0.2);
            border-radius: 30px;
            overflow: hidden;
            transition: 0.4s;
        }

        .card img { width: 100%; height: 300px; object-fit: cover; }

        .card-body { padding: 25px; }

        .whatsapp-link {
            background: #25d366;
            color: white;
            padding: 12px 0;
            display: block;
            text-decoration: none;
            border-radius: 15px;
            font-weight: bold;
            margin-top: 15px;
        }

        /* Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù†Ø´Ø± */
        .publish-box {
            background: rgba(255,255,255,0.05);
            padding: 30px;
            border-radius: 30px;
            width: 90%;
            max-width: 500px;
            margin: 20px auto;
            border: 1px solid rgba(212,175,55,0.3);
        }

        input, textarea {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: #000;
            border: 1px solid #d4af37;
            color: #fff;
            border-radius: 10px;
            text-align: center;
            font-family: 'Cairo';
        }

        .gold-btn {
            background: #d4af37;
            color: #000;
            padding: 15px 40px;
            border-radius: 50px;
            font-weight: 900;
            border: none;
            cursor: pointer;
            font-size: 18px;
        }

    </style>
</head>
<body>

    <div class="license-header">
        <img src="https://cdn-icons-png.flaticon.com/512/9745/9745265.png" width="30">
        <span style="font-weight: bold; color: #d4af37;">ÙˆØ«ÙŠÙ‚Ø© Ø¹Ù…Ù„ Ø­Ø± Ø­ÙƒÙˆÙ…ÙŠØ© Ù…Ø¹ØªÙ…Ø¯Ø©</span>
    </div>

    <div class="diamond" style="margin-top: 40px; font-size: 50px;">ğŸ’</div>
    <h1 class="big-logo">GASTS</h1>
    <span class="sub-text">OFFICIAL PLATFORM</span>
    
    <div style="color: #d4af37; margin-bottom: 10px;">gasts.work@outlook.com</div>
    
    <a href="https://www.tiktok.com/@gasts.sa" target="_blank" class="tiktok-btn-white">Ø¹Ø§Ù„Ù…Ù†Ø§ Ø¹Ù„Ù‰ ØªÙŠÙƒ ØªÙˆÙƒ</a>

    <br><br>
    <button id="loginBtn" class="gold-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ù†ØµØ©</button>

    <div id="userSection" style="display:none;">
        <div class="publish-box">
            <img id="userAvatar" style="width:80px; border-radius:50%; border:3px solid #d4af37;">
            <h2 id="userName"></h2>
            <button id="logoutBtn" style="color: red; background: none; border: none; cursor: pointer;">Ø®Ø±ÙˆØ¬</button>
        </div>

        <div class="publish-box">
            <h3 style="color:#d4af37;">Ø£Ù†Ø´Ø¦ Ø¥Ø¹Ù„Ø§Ù†Ùƒ Ø§Ù„Ø¢Ù†</h3>
            <input type="text" id="adTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†">
            <textarea id="adDesc" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬..." rows="3"></textarea>
            <input type="number" id="adPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ (9665...)">
            <input type="file" id="adImage" accept="image/*">
            <button id="submitAd" class="gold-btn" style="width: 100%;">Ù†Ø´Ø± Ø¨Ø¶Ù…Ø§Ù† GASTS</button>
            <p id="statusMsg"></p>
        </div>
    </div>

    <div class="main-glow-box">
        <h2>Ù…Ù†ØµØ© GASTS</h2>
        <p>Ù‚Ø§Ø³ØªØ³ Ù‡ÙŠ Ø§Ù„ÙˆØ¬Ù‡Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© Ø§Ù„Ø£ÙØ¶Ù„ ÙˆØ§Ù„ÙˆØ­ÙŠØ¯Ø© Ø§Ù„ØªÙŠ ØªØ¶Ù…Ù† Ù„Ù…Ù†ØªØ¬Ùƒ Ø§Ù„ÙØ®Ø§Ù…Ø© ÙˆØ§Ù„Ø§Ù†ØªØ´Ø§Ø± Ø¨Ù„Ø§ Ø£Ø®Ø·Ø§Ø¡.</p>
    </div>

    <div id="adsList" class="ads-container"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, query, onSnapshot, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAj9-v2keOetxOTi9Bb9GbiGhJeSH5Wcgs",
            authDomain: "gastssa.firebaseapp.com",
            projectId: "gastssa",
            storageBucket: "gastssa.appspot.com",
            messagingSenderId: "80656562183",
            appId: "1:80656562183:web:8c99a7f175c3e31f9b92a2"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);
        const provider = new GoogleAuthProvider();

        onAuthStateChanged(auth, (user) => {
            if (user) {
                document.getElementById("userSection").style.display = "block";
                document.getElementById("loginBtn").style.display = "none";
                document.getElementById("userAvatar").src = user.photoURL;
                document.getElementById("userName").textContent = user.displayName;
            } else {
                document.getElementById("userSection").style.display = "none";
                document.getElementById("loginBtn").style.display = "block";
            }
            loadAds();
        });

        document.getElementById("loginBtn").onclick = () => signInWithPopup(auth, provider);
        document.getElementById("logoutBtn").onclick = () => signOut(auth);

        document.getElementById("submitAd").onclick = async () => {
            const title = document.getElementById("adTitle").value;
            const desc = document.getElementById("adDesc").value;
            const phone = document.getElementById("adPhone").value;
            const file = document.getElementById("adImage").files[0];
            const status = document.getElementById("statusMsg");

            if (!title || !file || !phone) return alert("ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");

            try {
                document.getElementById("submitAd").disabled = true;
                status.textContent = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ ÙˆØ§Ù„Ø±ÙØ¹...";
                const storageRef = ref(storage, `ads/${Date.now()}`);
                const snapshot = await uploadBytes(storageRef, file);
                const url = await getDownloadURL(snapshot.ref);

                await addDoc(collection(db, "ads"), {
                    title: title, desc: desc, phone: phone, imageUrl: url,
                    author: auth.currentUser.displayName, createdAt: serverTimestamp()
                });

                status.textContent = "âœ… ØªÙ… Ø§Ù„Ù†Ø´Ø±!";
                setTimeout(() => location.reload(), 1000);
            } catch (err) { alert("Ø®Ø·Ø£!"); document.getElementById("submitAd").disabled = false; }
        };

        function loadAds() {
            const q = query(collection(db, "ads"), orderBy("createdAt", "desc"));
            onSnapshot(q, (snap) => {
                const list = document.getElementById("adsList");
                list.innerHTML = "";
                snap.forEach(doc => {
                    const d = doc.data();
                    list.innerHTML += `
                        <div class="card">
                            <img src="${d.imageUrl}">
                            <div class="card-body">
                                <h3 style="color:#d4af37; margin:0;">${d.title}</h3>
                                <p style="opacity:0.8;">${d.desc}</p>
                                <a href="https://wa.me/${d.phone}" target="_blank" class="whatsapp-link">ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</a>
                            </div>
                        </div>`;
                });
            });
        }
    </script>
</body>
</html>
