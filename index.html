<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GASTS</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700;900&display=swap" rel="stylesheet">

<style>
/* ====== تصميمك بدون أي تغيير ====== */
body {
    margin:0;
    font-family:'Cairo',sans-serif;
    background:#05080a;
    color:#fff;
    text-align:center;
}
.hero {padding:100px 20px;}
.btn {
    background:#fff;
    color:#000;
    padding:12px 30px;
    border-radius:30px;
    border:none;
    font-weight:bold;
    cursor:pointer;
}
input {
    padding:10px;
    border-radius:8px;
    border:none;
    width:260px;
    margin:6px 0;
}
.hidden {display:none;}
</style>
</head>

<body>

<div class="hero">
    <h1>GASTS</h1>
    <p>منصة الإعلانات الفاخرة</p>

    <!-- تسجيل / دخول -->
    <div id="authBox">
        <input id="email" type="email" placeholder="البريد الإلكتروني">
        <input id="password" type="password" placeholder="كلمة المرور">
        <br>
        <button class="btn" onclick="signUp()">تسجيل</button>
        <button class="btn" onclick="signIn()">دخول</button>
    </div>

    <!-- بعد الدخول -->
    <div id="userBox" class="hidden">
        <p id="userEmail"></p>
        <button class="btn" onclick="signOut()">تسجيل خروج</button>
    </div>
</div>

<!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
/* ===============================
   SUPABASE CONFIG
================================ */
const SUPABASE_URL = "https://YOUR_PROJECT_ID.supabase.co";
const SUPABASE_ANON_KEY = "YOUR_PUBLIC_ANON_KEY";

const supabase = window.supabase.createClient(
    SUPABASE_URL,
    SUPABASE_ANON_KEY
);

/* ===============================
   SECURITY HELPERS
================================ */
function sanitize(v){
    return v.replace(/[<>]/g,"").trim();
}

/* ===============================
   AUTH
================================ */
async function signUp(){
    const email = sanitize(document.getElementById("email").value);
    const password = document.getElementById("password").value;

    const { error } = await supabase.auth.signUp({ email, password });
    if(error) return alert(error.message);
    alert("تم إنشاء الحساب");
}

async function signIn(){
    const email = sanitize(document.getElementById("email").value);
    const password = document.getElementById("password").value;

    const { error } = await supabase.auth.signInWithPassword({ email, password });
    if(error) return alert("بيانات غير صحيحة");
}

async function signOut(){
    await supabase.auth.signOut();
    location.reload();
}

/* ===============================
   SESSION CHECK
================================ */
async function checkUser(){
    const { data } = await supabase.auth.getUser();
    if(data.user){
        document.getElementById("authBox").classList.add("hidden");
        document.getElementById("userBox").classList.remove("hidden");
        document.getElementById("userEmail").innerText =
          "مرحبًا " + data.user.email;
    }
}
checkUser();
</script>

</body>
</html>
