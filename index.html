<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>شركة GASTS | فخامة الإعلان</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #d4af37;
            --dark: #05080a;
            --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(212, 175, 55, 0.2);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0; padding: 0;
            font-family: 'Cairo', sans-serif;
            background-color: var(--dark);
            color: #fff;
            min-height: 100vh;
            display: flex; flex-direction: column;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(212, 175, 55, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(26, 42, 68, 0.3) 0%, transparent 40%);
        }

        .nebula-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
        }

        /* --- الهيدر واللوجو --- */
        header { text-align: center; padding: 40px 20px; }
        .logo-text {
            font-size: clamp(50px, 15vw, 90px);
            font-weight: 900; margin: 0;
            background: linear-gradient(to bottom, #fff 40%, var(--gold) 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        /* --- المربع الذي يتحرك عند اقتراب الماوس --- */
        .coming-soon-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.02));
            border: 1px solid var(--border);
            backdrop-filter: blur(20px);
            padding: 40px;
            border-radius: 30px;
            max-width: 500px;
            width: 90%;
            margin: 20px auto 50px;
            position: relative;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            overflow: hidden;
        }

        /* تأثير الحركة للكلمات عند اقتراب الماوس */
        .coming-soon-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--gold);
            box-shadow: 0 20px 40px rgba(212, 175, 55, 0.2);
        }

        .coming-soon-card h2, .coming-soon-card p {
            transition: transform 0.4s ease;
        }

        .coming-soon-card:hover h2 {
            transform: scale(1.1);
            color: #fff;
        }

        .coming-soon-card:hover p {
            transform: translateY(-5px);
            color: var(--gold);
        }

        /* --- زر تيك توك الفاخر --- */
        .btn-tiktok {
            background: #fff; color: #000;
            padding: 15px 40px; border-radius: 50px;
            text-decoration: none; font-weight: 800;
            display: inline-flex; align-items: center; gap: 10px;
            margin-bottom: 30px; transition: 0.3s;
        }
        .btn-tiktok:hover { transform: scale(1.05); box-shadow: 0 0 20px #fff; }

        /* --- لوحة تحكم الإعلانات (التقنية) --- */
        .ad-form {
            background: var(--glass); border: 1px solid var(--border);
            padding: 25px; border-radius: 25px; width: 90%; max-width: 450px;
            margin: 20px auto; backdrop-filter: blur(10px);
        }
        .ad-input {
            width: 100%; padding: 12px; margin: 10px 0; background: rgba(0,0,0,0.3);
            border: 1px solid var(--border); border-radius: 12px; color: #fff;
            font-family: 'Cairo'; text-align: center;
        }
        .submit-btn {
            background: var(--gold); color: #000; width: 100%; padding: 12px;
            border: none; border-radius: 50px; font-weight: bold; cursor: pointer;
        }

        /* --- شبكة الإعلانات --- */
        .ads-grid {
            display: grid; width: 95%; max-width: 1200px; margin: 0 auto;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;
        }
        .ad-card { background: var(--glass); border-radius: 20px; overflow: hidden; border: 1px solid var(--border); }
        .ad-card img { width: 100%; height: 220px; object-fit: cover; }
    </style>
</head>
<body>

    <div class="nebula-bg"></div>

    <header>
        <div class="logo-text">GASTS</div>
        <p style="color:var(--gold); letter-spacing:5px;">LUXURY AGENCY</p>
    </header>

    <div style="text-align: center;">
        <button id="loginBtn" style="background:var(--gold); color:#000; padding:12px 35px; border-radius:30px; font-weight:900; border:none; cursor:pointer;">دخول الأعضاء</button>

        <div id="userSection" style="display:none;">
            <div class="ad-form">
                <img id="userAvatar" style="width:60px; border-radius:50%; border:2px solid var(--gold);">
                <h3 id="userName"></h3>
                <input type="text" id="adTitle" placeholder="عنوان الإعلان" class="ad-input">
                <textarea id="adDesc" placeholder="التفاصيل..." class="ad-input"></textarea>
                <input type="number" id="adPhone" placeholder="واتساب 966..." class="ad-input">
                <input type="file" id="adImage" class="ad-input">
                <button id="submitAd" class="submit-btn">نشر الآن</button>
            </div>
        </div>

        <br>
        <a href="https://www.tiktok.com/@gasts.sa" class="btn-tiktok">عالمنا على تيك توك</a>

        <div class="coming-soon-card">
            <h2 style="color: var(--gold); margin: 0; font-weight: 900;">منصة GASTS</h2>
            <p style="margin-top: 15px; opacity: 0.9;">ترقبوا إطلاق أضخم منصة عرض للمنتجات الفاخرة قريباً.</p>
        </div>

        <div id="adsList" class="ads-grid"></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, query, onSnapshot, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAj9-v2keOetxOTi9Bb9GbiGhJeSH5Wcgs",
            authDomain: "gastssa.firebaseapp.com",
            projectId: "gastssa",
            storageBucket: "gastssa.appspot.com",
            messagingSenderId: "80656562183",
            appId: "1:80656562183:web:8c99a7f175c3e31f9b92a2"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);
        const provider = new GoogleAuthProvider();

        onAuthStateChanged(auth, (user) => {
            if (user) {
                document.getElementById("userSection").style.display = "block";
                document.getElementById("loginBtn").style.display = "none";
                document.getElementById("userAvatar").src = user.photoURL;
                document.getElementById("userName").textContent = user.displayName;
            }
            loadAds();
        });

        document.getElementById("loginBtn").onclick = () => signInWithPopup(auth, provider);

        document.getElementById("submitAd").onclick = async () => {
            const title = document.getElementById("adTitle").value;
            const file = document.getElementById("adImage").files[0];
            const phone = document.getElementById("adPhone").value;
            if(!title || !file) return alert("اكمل البيانات");

            const storageRef = ref(storage, `ads/${Date.now()}`);
            await uploadBytes(storageRef, file);
            const url = await getDownloadURL(storageRef);

            await addDoc(collection(db, "ads"), {
                title, imageUrl: url, phone, createdAt: serverTimestamp()
            });
            location.reload();
        };

        function loadAds() {
            const q = query(collection(db, "ads"), orderBy("createdAt", "desc"));
            onSnapshot(q, (snap) => {
                const list = document.getElementById("adsList");
                list.innerHTML = "";
                snap.forEach(doc => {
                    const d = doc.data();
                    list.innerHTML += `<div class="ad-card"><img src="${d.imageUrl}"><div style="padding:15px"><h4>${d.title}</h4><a href="https://wa.me/${d.phone}" class="submit-btn" style="text-decoration:none; display:block; text-align:center;">واتساب</a></div></div>`;
                });
            });
        }
    </script>
</body>
</html>
