<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GASTS</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700;900&display=swap" rel="stylesheet">

<style>
/* ====== تصميمك الأصلي (بدون تعديل) ====== */
:root {
    --gold:#d4af37;--dark:#05080a;--glass:rgba(255,255,255,.05);--border:rgba(212,175,55,.2)
}
*{box-sizing:border-box}
body{
margin:0;font-family:Cairo;background:var(--dark);color:#fff;overflow-x:hidden
}
.nebula-bg{position:fixed;inset:0;z-index:-1;background:radial-gradient(ellipse at bottom,#1B2735,#090A0F)}
header{text-align:center;padding:80px 20px 40px;position:relative}
.logo-text{font-size:80px;font-weight:900;background:linear-gradient(#fff,var(--gold));
-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.main-content{text-align:center;padding:20px}
.btn-tiktok{background:#fff;color:#000;padding:15px 40px;border-radius:50px;
display:inline-flex;gap:10px;text-decoration:none;font-weight:800}
.coming-soon-card{margin:40px auto;padding:40px;border-radius:30px;
background:rgba(255,255,255,.05);max-width:500px}

/* ====== إضافات خفيفة جدًا ====== */
.login-link{
position:absolute;top:15px;right:20px;
font-size:13px;color:var(--gold);cursor:pointer;opacity:.8
}
.login-link:hover{opacity:1}

.modal{
display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);
align-items:center;justify-content:center;z-index:999
}
.modal-box{
background:#0c1116;padding:30px;border-radius:20px;width:320px
}
.modal-box input, .modal-box button{
width:100%;margin-top:10px;padding:12px;border-radius:10px;border:none
}
.modal-box button{background:var(--gold);font-weight:800}
</style>
</head>

<body>

<div class="nebula-bg"></div>

<header>
    <span class="login-link" id="loginBtn">تسجيل الدخول</span>
    <h1 class="logo-text">GASTS</h1>
</header>

<div class="main-content">
    <a class="btn-tiktok" href="https://www.tiktok.com/@gasts.sa">تيك توك</a>

    <div class="coming-soon-card">
        <h2>منصة GASTS</h2>
        <p>إطلاق قريب</p>
    </div>
</div>

<!-- ====== نافذة تسجيل الدخول ====== -->
<div class="modal" id="authModal">
  <div class="modal-box">
    <h3>الدخول</h3>
    <input id="email" type="email" placeholder="الإيميل">
    <input id="password" type="password" placeholder="كلمة المرور">
    <button onclick="login()">دخول</button>
    <button onclick="register()">تسجيل جديد</button>
  </div>
</div>

<!-- ====== Supabase ====== -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
/* ====== المفاتيح (ثابتة) ====== */
const SUPABASE_URL = "https://hdyqcgsrjnciamsyeyla.supabase.co";
const SUPABASE_KEY = "sb_publishable_tlwDSDSqkIpBdKGe_oA4Gg_twuI4nJC";

const supabase = supabaseJs.createClient(SUPABASE_URL, SUPABASE_KEY);

/* ====== أدوات أمان ====== */
const clean = v => v.replace(/[<>]/g,"").trim();

/* ====== التحكم ====== */
document.getElementById("loginBtn").onclick=()=>{
  document.getElementById("authModal").style.display="flex"
}
window.onclick=e=>{
  if(e.target.id==="authModal")e.target.style.display="none"
}

/* ====== تسجيل ====== */
async function register(){
  const email=clean(emailInput.value)
  const pass=passwordInput.value
  if(pass.length<6)return alert("كلمة المرور قصيرة")

  const {error}=await supabase.auth.signUp({email,password:pass})
  if(error)alert(error.message)
  else alert("تم التسجيل")
}

/* ====== دخول ====== */
async function login(){
  const {error}=await supabase.auth.signInWithPassword({
    email:clean(emailInput.value),
    password:passwordInput.value
  })
  if(error)alert("بيانات غير صحيحة")
  else{
    alert("تم الدخول")
    document.getElementById("authModal").style.display="none"
  }
}

/* ====== حماية ====== */
supabase.auth.onAuthStateChange((_,session)=>{
  if(session){
    console.log("مستخدم مسجل")
  }
})
</script>

</body>
</html>
